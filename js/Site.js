/* 
 * ==========================================================================
 * JAVASCRIPT ДЛЯ САЙТА AlR1_Beats
 * Файл: js/Site.js
 * Назначение: Работа мобильного меню (открытие/закрытие)
 * ==========================================================================
 */

/* --------------------------------------------------------------------------
   1. ПОИСК ЭЛЕМЕНТОВ НА СТРАНИЦЕ
   -------------------------------------------------------------------------- */

// Находим кнопку бургера по её id="mobile-menu"
// const - объявление переменной (значение можно читать, нельзя менять)
const menuToggle = document.getElementById('mobile-menu');

// Находим навигационное меню по его id="nav-menu"
const navMenu = document.getElementById('nav-menu');


/* --------------------------------------------------------------------------
   2. ОБРАБОТЧИК КЛИКА НА БУРГЕР
   -------------------------------------------------------------------------- */

// Вешаем обработчик события "клик" на кнопку бургера
// addEventListener - метод для добавления обработчика
menuToggle.addEventListener('click', function() {
    
    // toggle - переключает класс: добавляет, если нет; удаляет, если есть
    // active - класс, который показывает меню
    navMenu.classList.toggle('active');
    
    // Переключаем класс is-active для анимации бургера (превращение в крестик)
    menuToggle.classList.toggle('is-active');
    
});


/* --------------------------------------------------------------------------
   3. ОБРАБОТЧИК КЛИКА НА ССЫЛКИ В МЕНЮ
   -------------------------------------------------------------------------- */

// Находим все ссылки внутри меню
// querySelectorAll - возвращает коллекцию всех найденных элементов
// 'a' - селектор тега (ищем все <a>)
const navLinks = navMenu.querySelectorAll('a');

// Перебираем каждую ссылку в коллекции
// forEach - метод перебора массива/коллекции
navLinks.forEach(function(link) {
    
    // Вешаем обработчик клика на каждую ссылку
    link.addEventListener('click', function() {
        
        // При клике на ссылку - закрываем меню
        // remove - удаляет класс
        navMenu.classList.remove('active');
        menuToggle.classList.remove('is-active');
        
    });
    
});


/* --------------------------------------------------------------------------
   4. ЗАКРЫТИЕ МЕНЮ ПРИ КЛИКЕ ВНЕ ЕГО ОБЛАСТИ
   -------------------------------------------------------------------------- */

// Вешаем обработчик клика на весь документ (страницу)
document.addEventListener('click', function(e) {
    
    // Проверяем условие: клик был НЕ по меню И НЕ по кнопке бургера
    // ! - логическое "НЕ" (отрицание)
    // contains - проверяет, содержит ли элемент другой элемент
    // e.target - элемент, по которому кликнули
    if (!navMenu.contains(e.target) && !menuToggle.contains(e.target)) {
        
        // Если клик вне - закрываем меню
        navMenu.classList.remove('active');
        menuToggle.classList.remove('is-active');
        
    }
    
});


/* --------------------------------------------------------------------------
   КАК ЭТО РАБОТАЕТ (ПОШАГОВО):
   --------------------------------------------------------------------------
   
   1. Пользователь кликает на бургер (☰)
      → menuToggle.addEventListener срабатывает
      → navMenu получает класс 'active' → меню показывается
      → menuToggle получает класс 'is-active' → бургер становится крестиком
   
   2. Пользователь кликает на ссылку в меню
      → navLinks.forEach обрабатывает клик
      → Классы 'active' и 'is-active' удаляются → меню закрывается
   
   3. Пользователь кликает в пустое место (вне меню)
      → document.addEventListener проверяет условие
      → Если клик не по меню и не по бургеру → меню закрывается
   
   --------------------------------------------------------------------------
*/
